package com.bankapp.main;


import java.util.Scanner;

import org.apache.log4j.Logger;

import com.bankapp.account.service.CustomerService;
import com.bankapp.account.service.impl.CustomerServiceImpl;
import com.bankapp.employee.service.EmployeeService;
import com.bankapp.employee.service.impl.EmployeeServiceImpl;
import com.bankapp.exception.LoginException;

public class Main {
	
	private static Logger log=Logger.getLogger(Main.class);

	public static void main(String[] args) {
		
		int ch = 0;
		Scanner scan=new Scanner(System.in);
		EmployeeService empService = new EmployeeServiceImpl();
		CustomerService custService = new CustomerServiceImpl();
		
		do {
			log.info("Welcome to Marvel Bank!");             //MAIN MENU
			log.info("-------------------------");
			log.info("1) Customer Login");
			log.info("2) Employee Login");
			log.info("3) Exit");
			try {
				ch=Integer.parseInt(scan.nextLine());
			}catch(NumberFormatException e) {
				//to default 
			}
			switch (ch) {
			case 1:
				int option=0;
				
				do{
					log.info("Welcome to customer login");                        //CUSTOMER LOGIN SUB MENU
				log.info("Please choose one of the following options");
				log.info("1) Login");
				log.info("2) Create an account");
				log.info("3) Exit");
				try {
					option=Integer.parseInt(scan.nextLine());
				}catch(NumberFormatException e) {
					//to default 
				}
				switch (option) {
				case 1:
					int check = 0;
					try {
						while(check == 0) {                                      //LOGIN 
							log.info("Please enter your user email address");
							String email=scan.nextLine();
							log.info("Please enter your password");
							String password=scan.nextLine();
							
							if (custService.custLogin(email, password)==false) {
								log.info("The email and password did not match please try again");
							}else {
								check=1;
							}
						}
					} catch (LoginException e) {
						log.info(e);
					}
					
					log.info("Welcome back! How will you be a HERO today?");      //MAIN CUSTOMER MENU
					int subOption=0;
					
					do{
						log.info("Welcome back HERO");                        //CUSTOMER LOGIN SUB MENU
					log.info("What would you like to do today?");
					log.info("1) My bank accounts");
					log.info("2) Create a new bank account");
					log.info("5) Log out");
					try {
						subOption=Integer.parseInt(scan.nextLine());
					}catch(NumberFormatException e) {}
						//to default 
						
					
					switch (subOption) {
					case 1:
						log.info("Displaying your accounts");
						log.info("Choose an accounnt for more actions");
						int subOption2=0;
						
						do{
						log.info("Displaying account details :");                        //CUSTOMER LOGIN SUB MENU
						/// account details...
						log.info("Would you like to make a transaction?");
						log.info("1) Withdrawal");
						log.info("2) Deposit");
						log.info("3) Transfer");
						log.info("4)Transaction history");
						log.info("5)Exit ");
						
						
						break;
					case 2:

						break;
					case 3:

						break;
					case 4:

						break;
					case 5:

						break;

					default:
						break;
					}
					
					}while(subOption!= 5);
					
					break;
				case 2:
					log.info("Please provide your email address");
					log.info("Create your password");

					break;
				case 3:
					log.info("Exiting to main menu");
					
					break;

				default:
					log.info("Please enter a number 1-3 ONLY");
					break;
				}
				}while(option!=3);

				break;
			case 2:
				log.info("Welcome to employee login");                         //EMPLOYEE LOGIN
				
				int check = 0;
				try {
					while(check == 0) {
						log.info("Please enter your user ID");
						int empId=Integer.parseInt(scan.nextLine());
						log.info("Please enter your password");
						String password=scan.nextLine();
						
						if (empService.empLogin(empId, password)==false) {
							log.info("The ID and password did not match please try again");
						}else {
							check=1;
						}
					}
				} catch (LoginException e) {
					log.info(e);
				}
				
				log.info("Welcome back! How will you be a HERO today?");
				
				break;
			case 3:
				log.info("Thank you for banking with Marvel Bank!");

				break;

			default:
				log.info("Please only enter a number 1-3");
				break;
			}

		} while (ch != 3);

	}

}
